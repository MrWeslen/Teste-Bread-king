<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
<title>Avalia√ß√£o ‚Äî Bread King</title>
<style>
  :root{
    --bg:#8b0e0e;          /* vinho do tema */
    --bg2:#7d0c0c;         /* leve varia√ß√£o p/ gradiente */
    --text:#f7e7b7;        /* dourado claro para textos */
    --panel:rgba(255,255,255,.06);
    --radius:28px;
  }
  html,body{height:100%;margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial}
  body{
    color:var(--text);
    background:
      radial-gradient(1200px 800px at 20% 10%, var(--bg2), transparent 60%),
      radial-gradient(1200px 800px at 80% 90%, var(--bg2), transparent 60%),
      var(--bg);
    display:grid; place-items:center; padding:clamp(12px,3vw,24px);
  }
  .wrap{
    width:min(980px,100%); text-align:center;
  }
  .brand{
    margin: clamp(6px,2.5vw,20px) auto;
    display:grid; place-items:center;
    gap: 10px;
  }
  .brand img{
    width: min(540px, 70vw);
    height:auto; display:block;
    filter: drop-shadow(0 10px 30px rgba(0,0,0,.35));
  }
  .panel{
    margin: clamp(8px,2vw,18px) auto 0;
    background:var(--panel);
    border-radius:var(--radius);
    padding: clamp(14px,3.5vw,28px);
    box-shadow: 0 20px 60px rgba(0,0,0,.35), inset 0 0 0 1px rgba(255,255,255,.06);
  }
  .title{
    font-size: clamp(18px,3.2vw,28px);
    font-weight:800; letter-spacing:.3px; margin:0 0 10px;
  }
  .buttons{
    display:grid; grid-template-columns:repeat(3,1fr);
    gap: clamp(10px,2.4vw,18px);
    margin-top: clamp(8px,2vw,14px);
  }
  .btn{
    border:0; border-radius:22px; padding: clamp(16px,3.6vw,30px);
    font-size: clamp(16px,3.6vw,24px); font-weight:800;
    color:#0b0f14; cursor:pointer;
    box-shadow: 0 10px 28px rgba(0,0,0,.25);
    transition: transform .06s ease;
  }
  .btn:active{ transform: scale(.98); }
  .green { background:#87f58a; }
  .yellow{ background:#ffe37e; }
  .red   { background:#ff8b8b; }

  .status{ min-height:28px; margin-top:12px; font-weight:700; }
  .success{ color:#87f58a; } .error{ color:#ff8b8b; }
  .foot{ opacity:.8; font-size:.95rem; margin-top:6px; }


  /* overlay ‚Äúobrigado‚Äù */
  .overlay{
    position:fixed; inset:0; display:none; place-items:center;
    background:rgba(0,0,0,.55); z-index:10;
  }
  .overlay.show{ display:grid; }
  .toast{
    background:#101722; color:#e6eefc; border-radius:20px;
    padding:28px 34px; font-size: clamp(18px,3.2vw,26px); font-weight:800;
    box-shadow: 0 20px 60px rgba(0,0,0,.4);
  }

  @media (max-width:720px){
    .buttons{ grid-template-columns:1fr; }
  }

  
  
</style>
</head>
<body>
  <div class="wrap" id="app">
    <!-- <div class="brand">
      Coloque sua logo como /logo.png 
      <img src="/logo.png" alt="Bread King">
    </div>-->

    <div class="panel">
      <p class="title">Como foi sua experi√™ncia hoje?</p>
      <div class="buttons">
        <button class="btn green"  data-rating="muito_satisfeito">üòÄ Muito satisfeito</button>
        <button class="btn yellow" data-rating="satisfeito">üôÇ Satisfeito</button>
        <button class="btn red"    data-rating="insatisfeito">‚òπÔ∏è Insatisfeito</button>
      </div>
      <div class="status" id="status"></div>
      <div class="foot" id="deviceInfo"></div>
    </div>
  </div>

  <div class="overlay" id="overlay"><div class="toast">Obrigado! Resposta registrada.</div></div>


  
<script>
  // ==== CONFIGURE AQUI ====
  const ENDPOINT  = "https://script.google.com/macros/s/AKfycbxNGGAA3VCJ_iZpFeToWcOwwFo_rDw8B5UjlInbIwCgi_CNJt3voAOCE-koTjzxu5KJ7w/exec"; // URL do Apps Script
  const DEVICE_ID = "loja Moema - Caixa 1";     // identifique o tablet/caixa
  // ========================

  const statusEl = document.getElementById("status");
  document.getElementById("deviceInfo").textContent = `Dispositivo: ${DEVICE_ID}`;

  async function enviar(rating){
    statusEl.textContent = "Enviando‚Ä¶";
    statusEl.className = "status";
    const payload = { device_id: DEVICE_ID, rating, ua: navigator.userAgent };
    try{
      await fetch(ENDPOINT, {
        method:"POST", mode:"no-cors",
        headers:{ "Content-Type":"application/json" },
        body: JSON.stringify(payload)
      });
      // Sem CORS n√£o h√° status; mostramos sucesso direto
      statusEl.textContent = "";
      document.getElementById("overlay").classList.add("show");
      setTimeout(()=>document.getElementById("overlay").classList.remove("show"), 1100);
    }catch(e){
      statusEl.textContent = "Falha ao enviar. Verifique a conex√£o.";
      statusEl.className = "status error";
    }
  }

  document.querySelectorAll("[data-rating]").forEach(b=>{
    b.addEventListener("click", ()=> enviar(b.dataset.rating));
  });

  // Mant√©m a tela ligada (quando suportado)
  if('wakeLock' in navigator){
    let lock;
    const req=async()=>{ try{ lock = await navigator.wakeLock.request('screen'); }catch(_){} };
    req(); document.addEventListener('visibilitychange', ()=>{ if(document.visibilityState==='visible') req(); });
  }
</script>
</body>
</html>
